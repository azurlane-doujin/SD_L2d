webpackJsonp([1],{"29uO":function(t,e){},G2Fr:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("k2Fn"),a("eNHs");var r=a("fwav"),s=a.n(r),i=(a("G2Fr"),a("iYgn")),n=a.n(i),o=(a("xKPr"),a("8jZV")),h=a.n(o),d=a("xd7I"),l=a("Ne5l"),c=a("iATI");a("P6Fy");function u(t){this.basePath=t,this.loader=new c.loaders.Loader(this.basePath)}u.prototype={spineData:{},load:function(t,e){var a=this;if(this.spineData[t])e.changeCanvas(this.spineData[t]);else{var r=t+".skel",s=t+".atlas",i=t+".png";this.loader.add(t+"_atlas",s,{type:"atlas"}),this.loader.add(t+"_skel",r,{xhrType:"arraybuffer"}),this.loader.add(t+"_tex",i),this.loader.load(function(r,s){var i=new l.SkeletonBinary;i.data=new Uint8Array(s[t+"_skel"].data),i.initJson();var n=i.json,o=s[t+"_atlas"].data,h=new c.spine.core.TextureAtlas(o,function(e,a){a(c.BaseTexture.from(t+"_tex"))}),d=new c.spine.core.AtlasAttachmentLoader(h),u=new c.spine.core.SkeletonJson(d).readSkeletonData(n);a.spineData[t]=u,e.changeCanvas(u)})}}};a("5u2O");var f={name:"MySpine",props:["skelName"],data:function(){return{basePath:"https://pic.ggemo.com/al_spines/",spineData:[],animations:[],selectedAnimation:"",width:document.body.clientWidth,height:document.body.clientHeight}},watch:{selectedAnimation:function(t,e){this.changeAnimation(t)},skelName:function(t,e){this.load(t),mySpineHolder}},created:function(){var t=this;window.v=this,this.PIXI=new c.Application(this.width,this.height,{transparent:!1}),window.onresize=function(){t.width=document.body.clientWidth,t.height=document.body.clientHeight,t.PIXI.renderer.resize(t.width,t.height),t.centerSD()},this.PIXI.renderer.backgroundColor=65280},mounted:function(){console.log(this.$refs.spine),this.PIXI.view.id="showSD",document.body.appendChild(this.PIXI.view),this.load(this.skelName)},methods:{load:function(t){var e=this,a=this.basePath+t;if(this.spineData[t])return this.changeCanvas(this.spineData[t]),this.spineData[t];this.loader=new c.loaders.Loader(a);var r=t+".skel",s=t+".atlas",i=t+".png";this.loader.add(t+"_atlas",s,{type:"atlas"}),this.loader.add(t+"_skel",r,{xhrType:"arraybuffer"}),this.loader.add(t+"_tex",i),this.loader.load(function(a,r){var s=new l.SkeletonBinary;s.data=new Uint8Array(r[t+"_skel"].data),s.initJson();var i=s.json,n=r[t+"_atlas"].data,o=new c.spine.core.TextureAtlas(n,function(e,a){a(c.BaseTexture.from(t+"_tex"))}),h=new c.spine.core.AtlasAttachmentLoader(o),d=new c.spine.core.SkeletonJson(h).readSkeletonData(i);return e.spineData[t]=d,e.selectedAnimation=0,e.changeCanvas(d),d})},changeCanvas:function(t){this.PIXI.stage.removeChildren(),this.spine=new c.spine.Spine(t),this.animations=this.spine.spineData.animations,this.spine.state.setAnimation(0,this.animations[0].name,!0),this.PIXI.stage.addChild(this.spine),this.centerSD()},changeAnimation:function(t){var e=this.spine.spineData.animations[t].name;this.spine.state.setAnimation(0,e,!0)},centerSD:function(){this.spine.position.set(.5*this.width,.65*this.height)}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"spine",attrs:{id:"mySpineHolder"}},[t._v("\n    select animation: "),a("el-select",{attrs:{name:"",id:"spineSelect"},model:{value:t.selectedAnimation,callback:function(e){t.selectedAnimation=e},expression:"selectedAnimation"}},t._l(t.animations.length,function(e){return a("el-option",{key:e,attrs:{value:e-1,label:t.animations[e-1].name}})}),1)],1)},staticRenderFns:[]};var v=a("C7Lr")(f,m,!1,function(t){a("uXTM")},null,null).exports,p=a("aozt"),g=a.n(p),y={name:"MySpineController",components:{MySpine:v},data:function(){return{selectedModel:"ximu_3",modelNames:[],bgColor:"#00ff00"}},created:function(){var t=this;g.a.defaults.headers.common["Cache-Control"]="no-cache",g.a.get("https://pic.ggemo.com/al_spines/sourceList.json").then(function(e){console.log(e),t.modelNames=e.data})},watch:{bgColor:function(t,e){var a=t.slice(1),r=parseInt(a,16);this.$refs.mySpine.PIXI.renderer.backgroundColor=r}}},I={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[t._v("\n        select background color:\n        "),a("el-color-picker",{model:{value:t.bgColor,callback:function(e){t.bgColor=e},expression:"bgColor"}})],1),t._v("\n\n    select model: "),a("el-select",{attrs:{name:"",id:"spineModelSelect"},model:{value:t.selectedModel,callback:function(e){t.selectedModel=e},expression:"selectedModel"}},t._l(t.modelNames.length,function(e){return a("el-option",{key:e,attrs:{value:t.modelNames[e-1]}},[t._v(t._s(t.modelNames[e-1]))])}),1),t._v(" "),a("my-spine",{ref:"mySpine",attrs:{skelName:t.selectedModel}})],1)},staticRenderFns:[]};var F={name:"App",components:{MySpineController:a("C7Lr")(y,I,!1,function(t){a("lxwQ")},"data-v-0a53c83c",null).exports}},w={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{ref:"app",attrs:{id:"app"}},[e("MySpineController")],1)},staticRenderFns:[]};var x=a("C7Lr")(F,w,!1,function(t){a("29uO")},null,null).exports,b=a("FmsF");d.default.use(b.a);var A=new b.a({routes:[]});a("hsAa");window.console.log=function(){},window.console.dir=function(){},window.console.warn=function(){},window.console.error=function(){},d.default.use(h.a),d.default.use(n.a),d.default.use(s.a),d.default.config.productionTip=!1,new d.default({el:"#app",router:A,components:{App:x},template:"<App/>"})},Ne5l:function(t,e){function a(){}a.prototype={data:null,scale:1,json:{},nextNum:0,chars:null,readByte:function(){return this.nextNum<this.data.length?this.data[this.nextNum++]:null},readBoolean:function(){return 0!=this.readByte()},readShort:function(){return this.readByte()<<8|this.readByte()},readInt:function(t){if(void 0===t)return this.readByte()<<24|this.readByte()<<16|this.readByte()<<8|this.readByte();var e=this.readByte(),a=127&e;return 0!=(128&e)&&(a|=(127&(e=this.readByte()))<<7,0!=(128&e)&&(a|=(127&(e=this.readByte()))<<14,0!=(128&e)&&(a|=(127&(e=this.readByte()))<<21,0!=(128&e)&&(a|=(127&(e=this.readByte()))<<28)))),t?a:a>>1^-(1&a)},bytes2Float32:function(t){var e=2147483648&t?-1:1,a=(t>>23&255)-127,r=8388607&t;if(128==a)return e*(r?Number.NaN:Number.POSITIVE_INFINITY);if(-127==a){if(0==r)return 0*e;a=-126,r/=1<<22}else r=(r|1<<23)/(1<<23);return e*r*Math.pow(2,a)},readFloat:function(){return this.bytes2Float32((this.readByte()<<24)+(this.readByte()<<16)+(this.readByte()<<8)+(this.readByte()<<0))},readVertices:function(t){var e=t<<1;if(!this.readBoolean())return this.readFloatArray(e,this.scale);for(var a=new Array,r=0;r<t;r++){var s=this.readInt(!0);a.push(s);for(var i=0;i<s;i++)a.push(this.readInt(!0)),a.push(this.readFloat()*this.scale),a.push(this.readFloat()*this.scale),a.push(this.readFloat())}return a},readFloatArray:function(t,e){var a=new Array(t);if(1==e)for(var r=0;r<t;r++)a[r]=this.readFloat();else for(r=0;r<t;r++)a[r]=this.readFloat()*e;return a},readShortArray:function(){for(var t=this.readInt(!0),e=new Array(t),a=0;a<t;a++)e[a]=this.readShort();return e},readIntArray:function(){for(var t=this.readInt(!0),e=new Array(t),a=0;a<t;a++)e[a]=this.readInt(!0);return e},readHex:function(){var t=this.readByte().toString(16);return 2==t.length?t:"0"+t},readColor:function(){return this.readHex()+this.readHex()+this.readHex()+this.readHex()},readString:function(){var t=this.readInt(this,!0);switch(t){case 0:return null;case 1:return""}t--,this.chars="";for(var e=0,a=0;a<t;)switch((e=this.readByte())>>4){case 12:case 13:this.chars+=String.fromCharCode((31&e)<<6|63&this.readByte()),a+=2;break;case 14:this.chars+=String.fromCharCode((15&e)<<12|(63&this.readByte())<<6|63&this.readByte()),a+=3;break;default:this.chars+=String.fromCharCode(e),a++}return this.chars},initJson:function(){this.json.skeleton={};var t=this.json.skeleton;t.hash=this.readString(),0==t.hash.length&&(t.hash=null),t.spine=this.readString(),0==t.spine.length&&(t.spine=null),t.width=this.readFloat(),t.height=this.readFloat();var e=this.readBoolean();e&&(t.fps=this.readFloat(),t.images=this.readString(),0==t.images.length&&(t.images=null)),this.json.bones=new Array(this.readInt(!0));for(var a=this.json.bones,s=0;s<a.length;s++){if((u={}).name=this.readString(),u.parent=null,0!=s){var d=this.readInt(!0);u.parent=a[d].name}u.rotation=this.readFloat(),u.x=this.readFloat()*this.scale,u.y=this.readFloat()*this.scale,u.scaleX=this.readFloat(),u.scaleY=this.readFloat(),u.shearX=this.readFloat(),u.shearY=this.readFloat(),u.length=this.readFloat()*this.scale,u.transform=i[this.readInt(!0)],e&&(u.color=this.readColor()),a[s]=u}this.json.slots=new Array(this.readInt(!0));var l=this.json.slots;for(s=0;s<l.length;s++){var c={};c.name=this.readString();var u=this.json.bones[this.readInt(!0)];c.bone=u.name,c.color=this.readColor(),c.dark=this.readColor(),c.attachment=this.readString(),c.blend=r[this.readInt(!0)],l[s]=c}var f=new Array(this.readInt(!0));for(s=0;s<f.length;s++){var m={};m.name=this.readString(),m.order=this.readInt(!0),m.bones=new Array(this.readInt(!0));for(var v=0;v<m.bones.length;v++)m.bones[v]=this.json.bones[this.readInt(!0)].name;m.target=this.json.bones[this.readInt(!0)].name,m.mix=this.readFloat(),m.bendPositive=255!=this.readByte(),f[s]=m}this.json.ik=f;var p=new Array(this.readInt(!0));for(s=0;s<p.length;s++){var g={};g.name=this.readString(),g.order=this.readInt(!0);for(var y=0,I=(a=new Array(this.readInt(!0))).length;y<I;y++)a[y]=this.json.bones[this.readInt(!0)].name;g.bones=a,g.target=this.json.bones[this.readInt(!0)].name,g.local=this.readBoolean(),g.relative=this.readBoolean(),g.rotation=this.readFloat(),g.x=this.readFloat()*this.scale,g.y=this.readFloat()*this.scale,g.scaleX=this.readFloat(),g.scaleY=this.readFloat(),g.shearY=this.readFloat(),g.rotateMix=this.readFloat(),g.translateMix=this.readFloat(),g.scaleMix=this.readFloat(),g.shearMix=this.readFloat(),p[s]=g}this.json.transform=p;var F=new Array(this.readInt(!0));for(s=0;s<F.length;s++){var w={};w.name=this.readString(),w.order=this.readInt(!0),w.bones=new Array(this.readInt(!0));for(y=0,I=w.bones.length;y<I;y++)w.bones[y]=this.json.bones[this.readInt(!0)].name;w.target=this.json.slots[this.readInt(!0)].name,w.positionMode=n[this.readInt(!0)],w.spacingMode=o[this.readInt(!0)],w.rotateMode=h[this.readInt(!0)],w.rotation=this.readFloat(),w.position=this.readFloat(),w.spacing=this.readFloat(),w.rotateMix=this.readFloat(),w.translateMix=this.readFloat(),F[s]=w}this.json.path=F,this.json.skins={},this.json.skinsName=new Array;var x=this.json.skins,b=this.readSkin("default",e);null!=b&&(x.default=b,this.json.skinsName.push("default"));s=0;for(var A=this.readInt(!0);s<A;s++){var S=this.readString(),k=this.readSkin(S,e);x[S]=k,this.json.skinsName.push("skinName")}this.json.events=[],this.json.eventsName=[];var C=this.json.events;for(s=0,A=this.readInt(!0);s<A;s++){var j=this.readString(),B={};B.int=this.readInt(!1),B.float=this.readFloat(),B.string=this.readString(),C[j]=B,this.json.eventsName[s]=j}this.json.animations={};var M=this.json.animations;for(s=0,A=this.readInt(!0);s<A;s++){var N=this.readString(),_=this.readAnimation(N);M[N]=_}},readSkin:function(t,e){var a=this.readInt(!0);if(0==a)return null;for(var r={},s=0;s<a;s++){for(var i=this.readInt(!0),n={},o=0,h=this.readInt(!0);o<h;o++){var d=this.readString(),l=this.readAttachment(d,e);n[d]=l}r[this.json.slots[i].name]=n}return r},readAttachment:function(t,e){var a=this.readString();switch(null==a&&(a=t),s[this.readByte()]){case"region":null==(d=this.readString())&&(d=a);var r={type:"region"};return r.name=a,r.path=d,r.rotation=this.readFloat(),r.x=this.readFloat()*this.scale,r.y=this.readFloat()*this.scale,r.scaleX=this.readFloat(),r.scaleY=this.readFloat(),r.width=this.readFloat()*this.scale,r.height=this.readFloat()*this.scale,r.color=this.readColor(),r;case"boundingbox":var i={type:"boundingbox"};i.name=a;var n=this.readInt(!0);return i.vertexCount=n,i.vertices=this.readVertices(n),this.nonessential&&(i.color=this.readColor()),i;case"mesh":null==(d=this.readString())&&(d=a);var o={type:"mesh"};o.name=a,o.path=d,o.color=this.readColor();n=this.readInt(!0);return o.uvs=this.readFloatArray(n<<1,1),o.triangles=this.readShortArray(),o.vertices=this.readVertices(n),o.hull=this.readInt(!0)<<1,e&&(o.edges=this.readShortArray(),o.width=this.readFloat()*this.scale,o.height=this.readFloat()*this.scale),o;case"linkedmesh":null==(d=this.readString())&&(d=a);var h={type:"linkedmesh"};return h.name=a,h.path=d,h.color=this.readColor(),h.skin=this.readString(),h.parent=this.readString(),h.deform=this.readBoolean(),e&&(h.width=this.readFloat()*this.scale,h.height=this.readFloat()*this.scale),h;case"path":var d;(d={type:"path"}).name=a,d.closed=this.readBoolean(),d.constantSpeed=this.readBoolean();n=this.readInt(!0);d.vertexCount=n,d.vertices=this.readVertices(n);for(var l=new Array(n/3),c=0;c<l.length;c++)l[c]=this.readFloat()*this.scale;return d.lengths=l,e&&(d.color=this.readColor()),d;case"point":var u={type:"point"};return u.name=a,u.rotation=this.readFloat(),u.x=this.readFloat()*this.scale,u.y=this.readFloat()*this.scale,e&&(d.color=this.readColor()),u;case"clipping":var f={type:"clipping"};f.name=a,f.end=this.readInt(!0);n=this.readInt(!0);return f.vertexCount=n,f.vertices=this.readVertices(n),e&&(f.color=this.readColor()),f}return null},readCurve:function(t,e){switch(this.readByte()){case 0:e[t].curve="linear";break;case 1:e[t].curve="stepped";break;case 2:var a=this.readFloat(),r=this.readFloat(),s=this.readFloat(),i=this.readFloat();e[t].curve=[a,r,s,i]}},readAnimation:function(t){for(var e={},a=this.scale,r=0,s={},i=0,n=this.readInt(!0);i<n;i++){for(var o=this.readInt(!0),h={},d=this.readInt(!0),l=0;l<d;l++){var c=this.readByte(),u=this.readInt(!0);switch(c){case 0:for(var f=new Array(u),m=0;m<u;m++){var v=this.readFloat(),p=this.readString();f[m]={},f[m].time=v,f[m].name=p}h.attachment=f,r=Math.max(r,f[u-1].time);break;case 1:for(f=new Array(u),m=0;m<u;m++){v=this.readFloat();var g=this.readColor();if(f[m]={},f[m].time=v,f[m].color=g,m<u-1)this.readCurve(m,f)}h.color=f,r=Math.max(r,f[u-1].time);break;case 2:for(f=new Array(u),m=0;m<u;m++){v=this.readFloat();var y=this.readColor(),I=this.readColor();if(f[m]={},f[m].time=v,f[m].light=y,f[m].dark=I,m<u-1)this.readCurve(m,f)}h.twoColor=f,r=Math.max(r,f[u-1].time)}}s[this.json.slots[o].name]=h}e.slots=s;var F={};for(i=0,n=this.readInt(!0);i<n;i++){for(var w=this.readInt(!0),x={},b=(l=0,this.readInt(!0));l<b;l++){c=this.readByte(),u=this.readInt(!0);switch(c){case 0:for(f=new Array(u),m=0;m<u;m++){v=this.readFloat();var A=this.readFloat();f[m]={},f[m].time=v,f[m].angle=A,m<u-1&&this.readCurve(m,f)}x.rotate=f,r=Math.max(r,f[u-1].time);break;case 1:case 2:case 3:f=new Array(u);var S=1;1==c&&(S=a);for(m=0;m<u;m++){var k=this.readFloat(),C=this.readFloat(),j=this.readFloat();f[m]={},f[m].time=k,f[m].x=C*S,f[m].y=j*S,m<u-1&&this.readCurve(m,f)}1==c?x.translate=f:2==c?x.scale=f:x.shear=f,r=Math.max(r,f[u-1].time)}}F[this.json.bones[w].name]=x}e.bones=F;var B={};for(i=0,n=this.readInt(!0);i<n;i++){var M=this.readInt(!0);for(u=this.readInt(!0),f=new Array(u),m=0;m<u;m++){v=this.readFloat();var N=this.readFloat(),_=255!=this.readByte();f[m]={},f[m].time=v,f[m].mix=N,f[m].bendPositive=_,m<u-1&&this.readCurve(m,f)}B[this.json.ik[M].name]=f}e.ik=B;var P={};for(i=0,n=this.readInt(!0);i<n;i++){var D=this.readInt(!0);for(u=this.readInt(!0),f=new Array(u),m=0;m<u;m++)f[m]={},f[m].time=this.readFloat(),f[m].rotateMix=this.readFloat(),f[m].translateMix=this.readFloat(),f[m].scaleMix=this.readFloat(),f[m].shearMix=this.readFloat(),m<u-1&&this.readCurve(m,f);P[this.json.transform[D].name]=f}e.transform=P;var X={};for(i=0,n=this.readInt(!0);i<n;i++){var H=this.readInt(!0),T={};for(l=0,b=this.readInt(!0);l<b;l++){c=this.readByte(),u=this.readInt(!0);switch(c){case 0:case 1:f=new Array(u),S=1;S=this.scale;for(m=0;m<u;m++){v=this.readFloat();var L=this.readFloat();f[m]={},f[m].time=v,0==c?f[m].position=L:f[m].spacing=L,m<u-1&&this.readCurve(m,f)}0==c?T.position=f:T.spacing=f;break;case 2:for(f=new Array(u),m=0;m<u;m++){v=this.readFloat();var O=this.readFloat(),V=this.readFloat();f[m]={},f[m].time=v,f[m].rotateMix=O,f[m].translateMix=V,m<u-1&&this.readCurve(m,f)}T.mix=f}}X[this.json.path[H].name]=T}e.paths=X;var Y={};for(i=0,n=this.readInt(!0);i<n;i++){var J=this.readInt(!0),R=this.json.skinsName[J],$={};for(l=0,b=this.readInt(!0);l<b;l++){o=this.readInt(!0);for(var E=this.json.slots[o],z={},G=0,K=this.readInt(!0);G<K;G++){var Q=this.readString();for(u=this.readInt(!0),f=new Array(u),m=0;m<u;m++){v=this.readFloat();var U=this.readInt(!0);if(f[m]={},f[m].time=v,0!=U){var W=new Array(U),Z=this.readInt(!0);if(1==this.scale)for(var q=0;q<U;q++)W[q]=this.readFloat();else for(q=0;q<U;q++)W[q]=this.readFloat()*this.scale;f[m].offset=Z,f[m].vertices=W}m<u-1&&this.readCurve(m,f)}z[Q]=f}$[E.name]=z}Y[R]=$}e.deform=Y;var tt=this.readInt(!0);if(tt>0){var et=new Array(tt);for(i=0;i<tt;i++){var at={},rt=(v=this.readFloat(),this.readInt(!0)),st=new Array(rt);for(l=0;l<rt;l++){var it={};o=this.readInt(!0);it.slot=this.json.slots[o].name;var nt=this.readInt(!0);it.offset=nt,st[l]=it}at.offsets=st,at.time=v,et[i]=at}r=Math.max(r,et[tt-1].time),e.drawOrder=et}var ot=this.readInt(!0);if(ot>0){var ht=new Array(ot);for(i=0;i<ot;i++){v=this.readFloat(),t=this.json.eventsName[this.readInt(!0)];var dt=this.json.events[t],lt={};lt.name=t,lt.int=this.readInt(!1),lt.float=this.readFloat(),lt.string=this.readBoolean()?this.readString():dt.string,lt.time=v,ht[i]=lt}r=Math.max(r,ht[ot-1].time),e.events=ht}return e}};var r=["normal","additive","multiply","screen"],s=["region","boundingbox","mesh","linkedmesh","path","point","clipping"],i=["normal","onlyTranslation","noRotationOrReflection","noScale","noScaleOrReflection"],n=["fixed","percent"],o=["length","fixed","percent"],h=["tangent","chain","chainScale"];e.SkeletonBinary=a},eNHs:function(t,e){},hsAa:function(t,e){},k2Fn:function(t,e){},lxwQ:function(t,e){},uXTM:function(t,e){},xKPr:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.6cd5ca21fb9ef62eb7da.js.map